<svg id="SvgjsSvg1006" width="1052" height="373.171875" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"><defs id="SvgjsDefs1007"><marker id="SvgjsMarker1030" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath1031" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker1035" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath1036" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker1040" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath1041" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker1045" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath1046" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker1050" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath1051" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker1055" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath1056" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker1060" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath1061" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker1065" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath1066" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker1070" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath1071" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker1075" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath1076" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker></defs><g id="SvgjsG1008" transform="translate(25,55)"><path id="SvgjsPath1009" d="M 19.95 0L 108.33333333333333 0C 139.72727272727272 0 139.72727272727272 148 108.33333333333333 148L 19.95 148C -6.65 148 -6.65 0 19.95 0ZM 108.33333333333333 0C 77.5 0 77.5 148 108.33333333333333 148C 77.5 148 77.5 0 108.33333333333333 0" stroke="#323232" stroke-width="2" fill="#ffffff"></path><g id="SvgjsG1010"><foreignObject id="SvgjsForeignObject1011" width="106.4" height="16" x="0" style="overflow:visible;" y="66"><div xmlns="http://www.w3.org/1999/xhtml" style="font-family: 微软雅黑; text-align: center; font-size: 13px; vertical-align: middle; color: rgb(50, 50, 50); font-weight: 400; line-height: 16px; width: 106.4px; word-break: break-word; border: 0px;">本地事务</div></foreignObject></g></g><g id="SvgjsG1012" transform="translate(272.125,55)"><path id="SvgjsPath1013" d="M 0 0L 87.75 0L 87.75 148L 0 148Z" stroke="#323232" stroke-width="2" fill="#ffffff"></path><g id="SvgjsG1014"><foreignObject id="SvgjsForeignObject1015" width="67.75" height="16" x="10" style="overflow:visible;" y="66"><div xmlns="http://www.w3.org/1999/xhtml" style="font-family: 微软雅黑; text-align: center; font-size: 13px; vertical-align: middle; color: rgb(50, 50, 50); font-weight: 400; line-height: 16px; width: 67.75px; word-break: break-word; border: 0px;">MQ发送方</div></foreignObject></g></g><g id="SvgjsG1016" transform="translate(527,55)"><path id="SvgjsPath1017" d="M 17.916666666666668 0L 107.5 0C 89.58333333333333 0 89.58333333333333 148 107.5 148L 17.916666666666668 148C -6.323529411764706 148 -6.323529411764706 0 15.357142857142858 0Z" stroke="#323232" stroke-width="2" fill="#ffffff"></path><g id="SvgjsG1018"><foreignObject id="SvgjsForeignObject1019" width="80.625" height="16" x="10.75" style="overflow:visible;" y="66"><div xmlns="http://www.w3.org/1999/xhtml" style="font-family: 微软雅黑; text-align: center; font-size: 13px; vertical-align: middle; color: rgb(50, 50, 50); font-weight: 400; line-height: 16px; width: 80.625px; word-break: break-word; border: 0px;">MQ服务端</div></foreignObject></g></g><g id="SvgjsG1020" transform="translate(720.625,55)"><path id="SvgjsPath1021" d="M 0 0L 110.25 0L 110.25 148L 0 148Z" stroke="#323232" stroke-width="2" fill="#ffffff"></path><g id="SvgjsG1022"><foreignObject id="SvgjsForeignObject1023" width="90.25" height="16" x="10" style="overflow:visible;" y="66"><div xmlns="http://www.w3.org/1999/xhtml" style="font-family: 微软雅黑; text-align: center; font-size: 13px; vertical-align: middle; color: rgb(50, 50, 50); font-weight: 400; line-height: 16px; width: 90.25px; word-break: break-word; border: 0px;">MQ订阅方</div></foreignObject></g></g><g id="SvgjsG1024" transform="translate(909,55)"><path id="SvgjsPath1025" d="M 17.7 0L 93.33333333333333 0C 124.72727272727273 0 124.72727272727273 148 93.33333333333333 148L 17.7 148C -5.9 148 -5.9 0 17.7 0ZM 93.33333333333333 0C 62.5 0 62.5 148 93.33333333333333 148C 62.5 148 62.5 0 93.33333333333333 0" stroke="#323232" stroke-width="2" fill="#ffffff"></path><g id="SvgjsG1026"><foreignObject id="SvgjsForeignObject1027" width="94.4" height="16" x="0" style="overflow:visible;" y="66"><div xmlns="http://www.w3.org/1999/xhtml" style="font-family: 微软雅黑; text-align: center; font-size: 13px; vertical-align: middle; color: rgb(50, 50, 50); font-weight: 400; line-height: 16px; width: 94.4px; word-break: break-word; border: 0px;">本地事务</div></foreignObject></g></g><g id="SvgjsG1028"><path id="SvgjsPath1029" d="M294 203L294 233L91.5 233L91.5 203" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1030)"></path><foreignObject id="SvgjsForeignObject1032" width="131" height="16" x="127.25" y="225"><div xmlns="http://www.w3.org/1999/xhtml" style="vertical-align: top; text-align: center; color: rgb(50, 50, 50); line-height: 16px; font-size: 13px; font-family: 微软雅黑; white-space: nowrap; display: inline-block; background: rgb(255, 255, 255);">6. 检查本地事务的状态</div></foreignObject></g><g id="SvgjsG1033"><path id="SvgjsPath1034" d="M316 55L316 25L580.75 25L580.75 55" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1035)"></path><foreignObject id="SvgjsForeignObject1037" width="122" height="32" x="387.375" y="9"><div xmlns="http://www.w3.org/1999/xhtml" style="vertical-align: top; text-align: center; color: rgb(50, 50, 50); line-height: 16px; font-size: 13px; font-family: 微软雅黑; white-space: nowrap; display: inline-block; background: rgb(255, 255, 255);">7. 根据事务状态<div></div>Commit Or Rollback</div></foreignObject></g><g id="SvgjsG1038"><path id="SvgjsPath1039" d="M580.75 203L580.75 233L316 233L316 203" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1040)"></path><foreignObject id="SvgjsForeignObject1042" width="209" height="16" x="343.875" y="225"><div xmlns="http://www.w3.org/1999/xhtml" style="vertical-align: top; text-align: center; color: rgb(50, 50, 50); line-height: 16px; font-size: 13px; font-family: 微软雅黑; white-space: nowrap; display: inline-block; background: rgb(255, 255, 255);">5. 没有收到4的确认时, 回查事务状态</div></foreignObject></g><g id="SvgjsG1043"><path id="SvgjsPath1044" d="M621.0625 129L670.84375 129L670.84375 129L720.625 129" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1045)"></path><foreignObject id="SvgjsForeignObject1047" width="52" height="32" x="644.84375" y="113"><div xmlns="http://www.w3.org/1999/xhtml" style="vertical-align: top; text-align: center; color: rgb(50, 50, 50); line-height: 16px; font-size: 13px; font-family: 微软雅黑; white-space: nowrap; display: inline-block; background: rgb(255, 255, 255);">Commit<div></div>投递消息</div></foreignObject></g><g id="SvgjsG1048"><path id="SvgjsPath1049" d="M622.0076106038165 164.1743114854953L653 164.1743114854953L653 348" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1050)"></path><foreignObject id="SvgjsForeignObject1052" width="91" height="32" x="607.5" y="224.5909610446559"><div xmlns="http://www.w3.org/1999/xhtml" style="vertical-align: top; text-align: center; color: rgb(50, 50, 50); line-height: 16px; font-size: 13px; font-family: 微软雅黑; white-space: nowrap; display: inline-block; background: rgb(255, 255, 255);">Rollback<div></div>删除消息不投递</div></foreignObject></g><g id="SvgjsG1053"><path id="SvgjsPath1054" d="M830.875 129L869.9375 129L869.9375 129L909 129" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1055)"></path><foreignObject id="SvgjsForeignObject1057" width="52" height="32" x="843.9375" y="113"><div xmlns="http://www.w3.org/1999/xhtml" style="vertical-align: top; text-align: center; color: rgb(50, 50, 50); line-height: 16px; font-size: 13px; font-family: 微软雅黑; white-space: nowrap; display: inline-block; background: rgb(255, 255, 255);">8. 执行<div></div>本地事务</div></foreignObject></g><g id="SvgjsG1058"><path id="SvgjsPath1059" d="M359 91L443.99619469809176 91L443.99619469809176 91.17431148549531L528.9923893961835 91.17431148549531" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1060)"></path><foreignObject id="SvgjsForeignObject1062" width="66" height="16" x="410.99619469809176" y="83.08715574274765"><div xmlns="http://www.w3.org/1999/xhtml" style="vertical-align: top; text-align: center; color: rgb(50, 50, 50); line-height: 16px; font-size: 13px; font-family: 微软雅黑; white-space: nowrap; display: inline-block; background: rgb(255, 255, 255);">1. 发送消息</div></foreignObject></g><g id="SvgjsG1063"><path id="SvgjsPath1064" d="M272.125 129L215.0625 129L215.0625 129L158 129" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1065)"></path><foreignObject id="SvgjsForeignObject1067" width="89" height="16" x="170.5625" y="121"><div xmlns="http://www.w3.org/1999/xhtml" style="vertical-align: top; text-align: center; color: rgb(50, 50, 50); line-height: 16px; font-size: 13px; font-family: 微软雅黑; white-space: nowrap; display: inline-block; background: rgb(255, 255, 255);">3.执行本地事务</div></foreignObject></g><g id="SvgjsG1068"><path id="SvgjsPath1069" d="M359 172L444.4848077530122 172L444.4848077530122 171.65270364466613L529.9696155060244 171.65270364466613" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1070)"></path><foreignObject id="SvgjsForeignObject1072" width="135" height="16" x="376.9848077530122" y="163.82635182233307"><div xmlns="http://www.w3.org/1999/xhtml" style="vertical-align: top; text-align: center; color: rgb(50, 50, 50); line-height: 16px; font-size: 13px; font-family: 微软雅黑; white-space: nowrap; display: inline-block; background: rgb(255, 255, 255);">4. Commit  Or  Rollback</div></foreignObject></g><g id="SvgjsG1073"><path id="SvgjsPath1074" d="M527 129L443.4375 129L443.4375 129L359.875 129" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1075)"></path><foreignObject id="SvgjsForeignObject1077" width="92" height="16" x="397.4375" y="121"><div xmlns="http://www.w3.org/1999/xhtml" style="vertical-align: top; text-align: center; color: rgb(50, 50, 50); line-height: 16px; font-size: 13px; font-family: 微软雅黑; white-space: nowrap; display: inline-block; background: rgb(255, 255, 255);">2. 消息发送成功</div></foreignObject></g></svg>